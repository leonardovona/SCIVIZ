<!DOCTYPE html>
<meta charset="utf-8">

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./css/style.css">

    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>

    <script type="module">
        import { updateStackedBarChart } from './js/stackedBarChart.js';
        window.updateStackedBarChart = updateStackedBarChart;
    </script>

    <script type="module" src="./js/main.js"></script>
</head>

<body>
    <div class="container" id="firstRowContainer">
        <div class="container column-container">
            <div class="item" id="mapItem">
                <div id="map"></div>   
                <div class="range" id="rangeDiv">
                    <p class="outputP"> Selected year: <output id="year">2019</output> </p>
                    <input type="range" min="2007" max="2019" steps="1" value="2019" id="year_input" list="steplist">
                    <datalist id="steplist">
                        <option value="2007" label="2007"></option>
                        <option value="2008" label="2008"></option>
                        <option value="2009" label="2009"></option>
                        <option value="2010" label="2010"></option>
                        <option value="2011" label="2011"></option>
                        <option value="2012" label="2012"></option>
                        <option value="2013" label="2013"></option>
                        <option value="2014" label="2014"></option>
                        <option value="2015" label="2015"></option>
                        <option value="2016" label="2016"></option>
                        <option value="2017" label="2017"></option>
                        <option value="2018" label="2018"></option>
                        <option value="2019" label="2019"></option>
                    </datalist>
                </div>
            </div>
        </div>
        <div class="container column-container">
            <div class="item thin" id="header">
                <p class="outputP" id="countryP">Selected country: <output id="country">EU</output></p>
                <button onclick="location.href='./guide'">Guide</button>
            </div>
            <div class="item" id="groupedBarItem">
                <p id="groupedBarTitle">Water abstraction by economic sector</p>
                <div id="groupedBarDiv">
                    <div id="groupedBarChart"></div>
                    <div id="groupedBarLegend"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="container thin">
        <div class="item" id="secondRowItem">
            <p id="secondRowP">Industrial pollutant releases to water</p>
        </div>
    </div>

    <div class="container" id="thirdRowContainer">
        <div class="item" id="stackedBarItem">
            <div id="stackedBarChart"></div>
            <div id="stackedBarLegend"></div>
            <div>
                <button onclick="updateStackedBarChart({year: document.querySelector('#year_input').value})">
                    Reset order
                </button>
            </div>
        </div>
        <div class="item" id="lineItem">
            <div id="lineChart"></div>
            <div id="lineLegend"></div>
        </div>
</body>