<!DOCTYPE html>
<meta charset="utf-8">

<head>
    <link rel="stylesheet" href="./css/style.css">
    <script type="module">
        import { updateStackedBarChart } from './js/stackedBarChart.js';
        window.updateStackedBarChart = updateStackedBarChart;
    </script>
</head>

<body style=>

    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>

    <div class="container" style="height: 50%;">
        <div class="item">
            <div id="map">
            </div>
        </div>
        <div class="item" style="display:block;">
            <p>Water abstraction by economic sector</p>
            <div id="groupedBarChart"></div>
            <div id="groupedBarLegend"></div>
        </div>
    </div>
    <div class="container" style="height: 7%;">
        <div class="item" style="display:flex;">
            <p><output id="country">EU</output></p>
            <div class="range">
                <input type="range" min="2007" max="2019" steps="1" value="2019" id="year_input" list="steplist">
                <datalist id="steplist">
                    <option value="2007"></option>
                    <option value="2008"></option>
                    <option value="2009"></option>
                    <option value="2010"></option>
                    <option value="2011"></option>
                    <option value="2012"></option>
                    <option value="2013"></option>
                    <option value="2014"></option>
                    <option value="2015"></option>
                    <option value="2016"></option>
                    <option value="2017"></option>
                    <option value="2018"></option>
                    <option value="2019"></option>
                </datalist>
            </div>
            <!-- !!! This need to be fixed, it resets the year -->
            <div>
                <button onclick="updateStackedBarChart()">Total</button>
                <button onclick="updateStackedBarChart({pollutant: 'TOC'})">TOC</button>
                <button onclick="updateStackedBarChart({pollutant: 'Nitrogen'})">Nitrogen</button>
                <button onclick="updateStackedBarChart({pollutant: 'Phosphorus'})">Phosphorus</button>
                <button onclick="updateStackedBarChart({pollutant: 'Heavy metals (Cd, Hg, Ni, Pb)'})">Heavy
                    metals</button>
            </div>
            <p>Year: <output id="year">2019</output></p>
        </div>
    </div>
    <div class="container" style="height: 7%;">
        <div class="item" style="display: block;">
            <p style="text-align:center;">Industrial pollutant releases to water</p>
        </div>
    </div>

    <div class="container" style="height: 36%;">
                <div class="item">
            <div id="stackedBarChart"></div>
            <div id="stackedBarLegend"></div>
        </div>
        <div class="item">
            <div id="lineChart"></div>
            <div id="lineLegend"></div>
        </div>

        <script type="module" src="./js/main.js"></script>
</body>